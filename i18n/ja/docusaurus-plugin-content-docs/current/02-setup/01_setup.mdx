---
id: setup
sidebar_position: 2
title: setup
sidebar_label: setup
---

# 概要

Klleon Ondevice SDKは、ビデオ処理、リアルタイムメッセージング、WebSocket通信とともにオンデバイスAI機能を提供するAndroid SDKです。このドキュメントはサンプルAndroidアプリケーションの実装を基に作成されています。


# セットアップ

## 1) 要件
- **最小SDK**: 26 (Android 8.0)
- **ターゲットSDK**: 36
- **NDKバージョン**: 28.2.13676358
---

### 1-1. リソース
SDKには以下のアセットファイルが必要です：
- ビデオファイル (`loop_sample.mp4`)
- 顔処理ファイル (`loop_sample.npz`)

これらのファイルは`assets`(`src/main/assets`)フォルダに配置され、ランタイムにキャッシュディレクトリにコピーされます。

### 1-2. AARファイル

- Kleon SDK AARファイルを`app/libs`にコピーします。


## 2) Android設定

```kotlin
android {
    compileSdk = 36
    ndkVersion = "28.2.13676358"
    
    defaultConfig {
        minSdk = 26
        targetSdk = 36
    }
    
    packaging {
        jniLibs {
            pickFirsts += "**/libc++_shared.so"
        }
    }
}
```

## 3) Gradle設定
- トップレベルbuild.gradle(.kts)ファイルにNew Relicプラグインを宣言します
   ```
    plugins {
        // for binary Gradle plugins that need to be resolved
        id("com.newrelic.agent.android") version "7.6.1" apply false
    }
   ```
- アプリレベルbuild.gradle(.kts)でプラグインを明示的に適用します
   ```
      plugins {
        id("com.newrelic.agent.android")
      }
   ```
- アプリレベルディレクトリにnewrelic.propertiesファイルを追加します
    - [ダウンロード](https://drive.google.com/file/d/1w7efkin2__s76fI6a86gsEDbejsb-Ojy/view?usp=sharing)


- アプリレベルbuild.gradle(.kts)に以下の内容を追加します
    ```
      // Aar
      implementation(fileTree(mapOf("dir" to "libs", "include" to listOf("*.aar"))))

      // Coroutines
      implementation("org.jetbrains.kotlinx:kotlinx-coroutines-core:1.9.0")
      implementation("org.jetbrains.kotlinx:kotlinx-coroutines-android:1.9.0")

      // TensorFlow
      implementation("org.tensorflow:tensorflow-lite:2.15.0")
      implementation("org.tensorflow:tensorflow-lite-gpu:2.15.0")
      implementation("org.tensorflow:tensorflow-lite-gpu-delegate-plugin:0.4.4")
      implementation("org.tensorflow:tensorflow-lite-gpu-api:2.15.0")
      implementation("org.tensorflow:tensorflow-lite-select-tf-ops:2.15.0")
      implementation("org.tensorflow:tensorflow-lite-metadata:0.4.4")
      implementation("org.tensorflow:tensorflow-lite-support:0.4.4")

      // OpenCV
      implementation("org.opencv:opencv:4.11.0")

      // PyTorch
      implementation("com.facebook.soloader:nativeloader:0.12.1")
      implementation("org.pytorch:pytorch_android_lite:2.1.0")

      // WebSocket
      implementation("com.squareup.okhttp3:okhttp:4.12.0")

      // Jackson
      implementation("com.fasterxml.jackson.core:jackson-databind:2.15.0")
      implementation("com.fasterxml.jackson.core:jackson-annotations:2.15.0")
      implementation("com.fasterxml.jackson.module:jackson-module-kotlin:2.15.0")
  
      // Newrelic
      implementation("com.newrelic.agent.android:android-agent:7.6.1")
    ```

{/* ## サンプルアプリダウンロード
- [ダウンロード] */}
